## 回测框架主线 TODO

➡️ 当前阶段目标：交付可扩展的 A 股多策略回测最小可用版本（2 年窗口）

- [ ] 数据基线
  - [ ] 校验 `MarketData`/`StockData` 表的日线覆盖范围与缺口情况
  - [ ] 评估 `Company` 表是否具备策略筛选所需财务字段（EPS、负债率、ROE 等）
  - [ ] 归档数据接口差距（如缺失 PE/TTM、流动性指标），形成补采方案
- [x] 回测框架落地
  - [x] 设计 `core.backtest` 模块：数据提供层、仓位引擎、策略接口、绩效分析
  - [x] 定义回测配置（起始资金、滑点/手续费、再平衡频率、持仓上限≤100 档）
  - [x] 实现基础 Portfolio & Trade 跟踪，输出胜率、收益、回撤、换手
- [ ] 策略示例与管线
  - [x] 实现低估值示例策略：按 PE/EPS/ROE 过滤 + 动量排序、等权持仓
  - [ ] 组合构建：流动性过滤 + 100 档上限 + 2 年每日再平衡验证
  - [ ] 产出回测报表：收益曲线、交易列表、胜率、Top 底仓解析
- [x] 可测试性
  - [x] 补充 `core/tests/` 单元测试与集成用例，覆盖核心引擎与示例策略
  - [ ] 构建最小模拟数据集，支持本地/CI 回放（无需真实 Dynamo）
- [ ] 工程化与接口
  - [ ] 提供 CLI 或脚本入口（e.g. `python -m core.backtest.run --config ...`）
  - [ ] 输出 JSON/CSV 结果，预留 REST/GraphQL 接入契约
  - [ ] 补充关键模块注释与 README 摘要，标注扩展点
- [ ] 架构演进
  - [x] 拆分 `core.strategy/` 存放策略集合，统一调用 `core.backtest` 框架
  - [x] 调整回测引擎支持函数式数据源（股票池筛选、行情加载、因子加载）
  - [ ] 接入 Akshare 数据适配器（行情 + 财务），验证 2 年窗口回放
  - [ ] 将策略回测流程编排为模块化流水线（数据准备 → 策略信号 → 回测执行 → 报告导出）

注：所有业务逻辑放置于 `business/` 或 `core/backtest/`，读写解耦，关键流程必须配套单元测试与数据一致性校验。